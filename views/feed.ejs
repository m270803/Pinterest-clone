<% include ./partials/header.ejs %>
<div class="w-full min-h-screen bg-zinc-800 px-10 py-8 text-white">
    <div class="cards flex flex-wrap gap-10">
        <% posts.forEach(function(elem){ %>
            <div class="card w-32">
                <div class=" w-full h-40 bg-zinc-200 rounded-lg overflow-hidden">
                    <img class="w-full h-full object-cover" src="/images/uploads/<%= elem.image %>" alt="" onclick="expandImage('<%= elem.image %>')">
                </div>
                <h5 class="mt-2 text-sm"><%= elem.title %></h5>
                <h6 class="mt-2 text-sm"><%= elem.description %></h6>
                <h6 class="opacity-50 font-semibold text-xs">@<%= elem.user.username %></h6>
            </div>
        <% }) %>
    </div>
</div>
<% include ./partials/footer.ejs %>

<!-- Modal HTML with custom styling -->
<div id="imageModal" class="modal fade" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body">
                <img id="expandedImage" src="" class="w-60vw" alt=""> <!-- Adjusted width to cover 60% of the viewport width -->
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet"> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

<style>
    /* Custom CSS for the modal */
    .modal-body {
        display: flex;
        justify-content: center;
    }
    .modal-content {
        width: auto;
        max-width: 100vw; /* Limiting the maximum width to 60% of the viewport width */
    }
    .modal-body img {
        max-width: 100%; /* Ensuring the image does not exceed the modal's width */
        height: 100; /* Ensuring the image maintains its aspect ratio */
    }
</style>

<script>
    function expandImage(imageUrl) {
        // Set the src attribute of the expanded image
        $('#expandedImage').attr('src', '/images/uploads/' + imageUrl);
        
        // Show the modal
        $('#imageModal').modal('show');
    }
</script>
